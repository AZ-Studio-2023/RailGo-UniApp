!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).index=e()}(this,function(){"use strict";var h,t,o,e;(t=h=h||{}).GET="GET",t.POST="POST",t.PUT="PUT",t.HEAD="HEAD",t.DELETE="DELETE",t.TRACE="TRACE",t.CONNECT="CONNECT",t.OPTIONS="OPTIONS",(e=o=o||{}).TEXT="text",e.ARRAYBUFFER="arraybuffer";var a=function(a){function s(t,e,o,r,n){a.call(this,t),this.config=o,this.statusCode=e,this.request=r,this.response=n,Object.setPrototypeOf(this,s.prototype)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s}(Error);function d(t,e,o,r,n){return new a(t,e,o,r,n)}function r(a){var t=a.url;void 0===t&&(t="");var e=a.method;void 0===e&&(e=h.GET);var s=a.data;void 0===s&&(s={});var i=a.header;void 0===i&&(i={});var u=a.responseType;void 0===u&&(u=o.TEXT);var c=a.cancelToken,f=a.validateStatus,p=function(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(o[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(o[r[n]]=t[r[n]])}return o}(a,["url","method","data","header","responseType","cancelToken","validateStatus"]);return new Promise(function(o,r){var n=(uni||wx||my||swan||tt||qq).request(Object.assign(Object.assign({url:t,header:i,method:e,data:s,responseType:u},p),{success:function(t){var e={data:t.data,statusCode:t.statusCode,header:t.header,config:a};!f||f(t.statusCode)?o(e):r(d("Request failed with status code "+e.statusCode,e.statusCode,a,n,e))},fail:function(t){r(d(t.errMsg||"Request Fail:"+a.url,1001,a))}}));c&&c.promise.then(function(t){n.abort(),r(t)})})}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=Object.prototype.toString;function u(t){return null!==t&&"object"===s(t)}function n(e,o){if(null!=e)if("object"!==s(e)&&(e=[e]),n=e,"[object Array]"===i.call(n))for(var t=0,r=e.length;t<r;t++)o.call(null,e[t],t,e);else Object.getOwnPropertyNames(e).forEach(function(t){Object.prototype.hasOwnProperty.call(e,t)&&"constructor"!==t&&o.call(null,e[t],t,e)});var n}function c(o,t,r){return n(t,function(t,e){o[e]=r&&"function"==typeof t?t.bind(r):t}),o}function f(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var o,r,n=Object.create({});for(var a=0;a<t.length;a++){var s=t[a];for(var i in s)o=s[i],u(n[r=i]&&u(o))?n[r]=f(n[r],o):u(o)?n[r]=f({},o):n[r]=o}return n}function p(e,o){Object.keys(e).forEach(function(t){t!==o&&t.toUpperCase()===o.toUpperCase()&&(e[o]=e[t],delete e[t])})}function l(t){var e=t.header;void 0===e&&(e={});var o,r,n,a=t.method;return void 0===a&&(a=h.GET),p(o=e,"Content-Type"),p(o,"appId"),p(o,"sessionId"),n=a,(r=e=o)&&(r=f(r.common||{},r[n.toLocaleLowerCase()]||{},r),["delete","get","head","options","post","put","patch","common"].forEach(function(t){delete r[t]})),r}function y(t){var e=t.url;void 0===e&&(e="");var o,r,n=t.baseURL;return void 0===n&&(n=""),n&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)&&(o=n,e=(r=e)?o.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):o),e}function v(t){var e,o;return(e=t).cancelToken&&e.cancelToken.throwIfRequested(),(o=t).header=l(o),o.url=y(o),r(t)}function m(){this.handlers=[]}function T(e,o){var r=Object.create({});["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"].forEach(function(t){void 0!==(o=o||{})[t]?r[t]=o[t]:void 0!==e[t]&&(r[t]=e[t])});["url","method","params","data"].forEach(function(t){void 0!==(o=o||{})[t]&&(r[t]=o[t])});return["header","auth","proxy"].forEach(function(t){u((o=o||{})[t])?r[t]=f(e[t],o[t]):void 0!==o[t]?r[t]=o[t]:u(e[t])?r[t]=f(e[t]):void 0!==e[t]&&(r[t]=e[t])}),r}m.prototype.use=function(t,e){return this.handlers.push({resolved:t,rejected:e}),this.handlers.length-1},m.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},m.prototype.forEach=function(e){this.handlers.forEach(function(t){null!==t&&e(t)})};function E(t){this.defaults=t,this.interceptors={request:new m,response:new m}}E.prototype.request=function(t){t=T(this.defaults,t);var e=Promise.resolve(t),o=[{resolved:v,rejected:void 0}];for(this.interceptors.request.forEach(function(t){o.unshift(t)}),this.interceptors.response.forEach(function(t){o.push(t)});0<o.length;){var r=o.shift(),n=r.resolved,a=r.rejected;e=e.then(n,a)}return e},E.prototype.get=function(t,e,o){return this._requestMethodWithData(h.GET,t,e,o)},E.prototype.post=function(t,e,o){return this._requestMethodWithData(h.POST,t,e,o)},E.prototype.put=function(t,e,o){return this._requestMethodWithData(h.PUT,t,e,o)},E.prototype.delete=function(t,e){return this._requestMethodWithoutData(h.DELETE,t,e)},E.prototype.connect=function(t,e){return this._requestMethodWithoutData(h.CONNECT,t,e)},E.prototype.head=function(t,e){return this._requestMethodWithoutData(h.HEAD,t,e)},E.prototype.options=function(t,e){return this._requestMethodWithoutData(h.OPTIONS,t,e)},E.prototype.trace=function(t,e){return this._requestMethodWithoutData(h.TRACE,t,e)},E.prototype._requestMethodWithData=function(t,e,o,r){return this.request(Object.assign(r||{},{method:t,url:e,data:o}))},E.prototype._requestMethodWithoutData=function(t,e,o){return this.request(Object.assign(o||{},{method:t,url:e}))},E.prototype.getUri=function(t){return y(t=T(this.defaults,t))};function b(t){void 0===t&&(t=""),this.message=t}function O(t){var e,o=this;this.promise=new Promise(function(t){e=t}),t(function(t){o.reason||(o.reason=new b(t),e(o.reason))})}var g={baseURL:"",header:{"Content-Type":"application/x-www-form-urlencoded"},method:h.GET,responseType:o.TEXT,validateStatus:function(t){return 200<=t&&t<300}};function C(t){var e=new E(t),o=E.prototype.request.bind(e);return c(o,E.prototype,e),c(o,e),o}O.source=function(){var e,t=new O(function(t){e=t});return{cancel:e,token:t}},O.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};var q=C(g);return q.create=function(t){return C(T(g,t))},q.CancelToken=O,q.Cancel=b,q.isCancel=function(t){return t instanceof b},q.all=function(t){return Promise.all(t)},q.spread=function(e){return function(t){return e.apply(null,t)}},q});
